
<div>
    <h2 translate="cmpe295App.recHistory.home.title">RecHistorys</h2>
    <jh-alert></jh-alert>
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-4 no-padding-left">
                <button class="btn btn-primary" ui-sref="recHistory.new" >
                    <span class="glyphicon glyphicon-plus"></span>
                    <span
                        translate="cmpe295App.recHistory.home.createLabel">Create new RecHistory
                    </span>
                </button>
            </div>
        </div>
    </div>
    <br/>

    <div class="table-responsive">
        <table class="jh-table table table-striped">
            <thead>
                <tr>
                    <th><span translate="global.field.id">ID</span></th>
                    <th><span translate="cmpe295App.recHistory.foodName">FoodName</span></th>
                    <th><span translate="cmpe295App.recHistory.brandName">BrandName</span></th>
                    <th><span translate="cmpe295App.recHistory.timestamp">Timestamp</span></th>
                    <th><span translate="cmpe295App.recHistory.user">user</span></th>
                    <th><span>Rating</span></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="recHistory in recHistorys track by recHistory.id">
                    <td><a ui-sref="recHistory.detail({id:recHistory.id})">{{recHistory.id}}</a></td>
                    <td>{{recHistory.foodName}}</td>
                    <td>{{recHistory.brandName}}</td>
                    <td>{{recHistory.timestamp | date:'medium'}}</td>
                    <td>
                        {{recHistory.user.id}}
                    </td>
                    <td>
                        <div id="shop"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="stars/rating.min.js"></script>
<script>

    /**
     * Demo in action!
     */
    (function() {

        'use strict';

        // SHOP ELEMENT
        var shop = document.querySelector('#shop');

        // DUMMY DATA
        var data = [
            {
                title: "Dope Hat",
                description: "Dope hat dolor sit amet, consectetur adipisicing elit. Commodi consectetur similique ullam natus ut debitis praesentium.",
                rating: 3
            }
        ];

        // INITIALIZE
        (function init() {
            for (var i = 0; i < data.length; i++) {
                addRatingWidget(buildShopItem(data[i]), data[i]);
            }
        })();

        // BUILD SHOP ITEM
        function buildShopItem(data) {
            var shopItem = document.createElement('div');

            var html = //'<div class="c-shop-item__img"></div>' +
                '<div class="c-shop-item__details">' +
                // '<h3 class="c-shop-item__title">' + data.title + '</h3>' +
                // '<p class="c-shop-item__description">' + data.description + '</p>' +
                '<ul class="c-rating"></ul>' +
                '</div>';

            shopItem.classList.add('c-shop-item');
            shopItem.innerHTML = html;
            shop.appendChild(shopItem);

            return shopItem;
        }

        // ADD RATING WIDGET
        function addRatingWidget(shopItem, data) {
            var ratingElement = shopItem.querySelector('.c-rating');
            var currentRating = data.rating;
            var maxRating = 5;
            var callback = function(rating) { alert(rating); };
            var r = rating(ratingElement, currentRating, maxRating, callback);
        }

    })();

</script>

